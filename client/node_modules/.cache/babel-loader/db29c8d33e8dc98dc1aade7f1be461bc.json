{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connectGeoSearch } from 'react-instantsearch-dom';\nimport { LatLngPropType, BoundingBoxPropType } from './propTypes';\n\nfunction isEqualPosition(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  return a.lat === b.lat && a.lng === b.lng;\n}\n\nfunction isEqualCurrentRefinement(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  return isEqualPosition(a.northEast, b.northEast) && isEqualPosition(a.southWest, b.southWest);\n}\n\nexport var Connector =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Connector, _Component);\n\n  function Connector() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Connector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Connector)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isRefineOnMapMove: _this.props.enableRefineOnMapMove,\n      hasMapMoveSinceLastRefine: false,\n      previousPosition: _this.props.position,\n      previousCurrentRefinement: _this.props.currentRefinement\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleRefineOnMapMove\", function () {\n      return _this.setState(function (_ref) {\n        var isRefineOnMapMove = _ref.isRefineOnMapMove;\n        return {\n          isRefineOnMapMove: !isRefineOnMapMove\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setMapMoveSinceLastRefine\", function (next) {\n      var hasMapMoveSinceLastRefine = _this.state.hasMapMoveSinceLastRefine;\n\n      if (hasMapMoveSinceLastRefine === next) {\n        return;\n      }\n\n      _this.setState(function () {\n        return {\n          hasMapMoveSinceLastRefine: next\n        };\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          hits = _this$props.hits,\n          isRefinedWithMap = _this$props.isRefinedWithMap,\n          position = _this$props.position,\n          currentRefinement = _this$props.currentRefinement,\n          refine = _this$props.refine,\n          children = _this$props.children;\n      var _this$state = this.state,\n          isRefineOnMapMove = _this$state.isRefineOnMapMove,\n          hasMapMoveSinceLastRefine = _this$state.hasMapMoveSinceLastRefine;\n      return children({\n        toggleRefineOnMapMove: this.toggleRefineOnMapMove,\n        setMapMoveSinceLastRefine: this.setMapMoveSinceLastRefine,\n        hits: hits,\n        isRefinedWithMap: isRefinedWithMap,\n        isRefineOnMapMove: isRefineOnMapMove,\n        // @MAJOR hasMapMoveSinceLastRefine -> hasMapMovedSinceLastRefine\n        hasMapMoveSinceLastRefine: hasMapMoveSinceLastRefine,\n        position: position,\n        currentRefinement: currentRefinement,\n        refine: refine\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var position = props.position,\n          currentRefinement = props.currentRefinement;\n      var previousPosition = state.previousPosition,\n          previousCurrentRefinement = state.previousCurrentRefinement;\n      var positionChanged = !isEqualPosition(previousPosition, position);\n      var currentRefinementChanged = !isEqualCurrentRefinement(previousCurrentRefinement, currentRefinement);\n      var sliceNextState = {\n        previousPosition: position,\n        previousCurrentRefinement: currentRefinement\n      };\n\n      if (positionChanged || currentRefinementChanged) {\n        return _objectSpread({}, sliceNextState, {\n          hasMapMoveSinceLastRefine: false\n        });\n      }\n\n      return sliceNextState;\n    }\n  }]);\n\n  return Connector;\n}(Component);\n\n_defineProperty(Connector, \"propTypes\", {\n  hits: PropTypes.arrayOf(PropTypes.object).isRequired,\n  isRefinedWithMap: PropTypes.bool.isRequired,\n  enableRefineOnMapMove: PropTypes.bool.isRequired,\n  refine: PropTypes.func.isRequired,\n  children: PropTypes.func.isRequired,\n  position: LatLngPropType,\n  currentRefinement: BoundingBoxPropType\n});\n\nexport default connectGeoSearch(Connector);","map":{"version":3,"sources":["/Users/michellehu/ii-react/client/node_modules/react-instantsearch-dom-maps/dist/es/Connector.js"],"names":["_objectSpread","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","Component","PropTypes","connectGeoSearch","LatLngPropType","BoundingBoxPropType","isEqualPosition","a","b","undefined","lat","lng","isEqualCurrentRefinement","northEast","southWest","Connector","_Component","_getPrototypeOf2","_this","_len","arguments","length","args","Array","_key","call","apply","concat","isRefineOnMapMove","props","enableRefineOnMapMove","hasMapMoveSinceLastRefine","previousPosition","position","previousCurrentRefinement","currentRefinement","setState","_ref","next","state","key","value","render","_this$props","hits","isRefinedWithMap","refine","children","_this$state","toggleRefineOnMapMove","setMapMoveSinceLastRefine","getDerivedStateFromProps","positionChanged","currentRefinementChanged","sliceNextState","arrayOf","object","isRequired","bool","func"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connectGeoSearch } from 'react-instantsearch-dom';\nimport { LatLngPropType, BoundingBoxPropType } from './propTypes';\n\nfunction isEqualPosition(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  return a.lat === b.lat && a.lng === b.lng;\n}\n\nfunction isEqualCurrentRefinement(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  return isEqualPosition(a.northEast, b.northEast) && isEqualPosition(a.southWest, b.southWest);\n}\n\nexport var Connector =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Connector, _Component);\n\n  function Connector() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Connector);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Connector)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      isRefineOnMapMove: _this.props.enableRefineOnMapMove,\n      hasMapMoveSinceLastRefine: false,\n      previousPosition: _this.props.position,\n      previousCurrentRefinement: _this.props.currentRefinement\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"toggleRefineOnMapMove\", function () {\n      return _this.setState(function (_ref) {\n        var isRefineOnMapMove = _ref.isRefineOnMapMove;\n        return {\n          isRefineOnMapMove: !isRefineOnMapMove\n        };\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setMapMoveSinceLastRefine\", function (next) {\n      var hasMapMoveSinceLastRefine = _this.state.hasMapMoveSinceLastRefine;\n\n      if (hasMapMoveSinceLastRefine === next) {\n        return;\n      }\n\n      _this.setState(function () {\n        return {\n          hasMapMoveSinceLastRefine: next\n        };\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          hits = _this$props.hits,\n          isRefinedWithMap = _this$props.isRefinedWithMap,\n          position = _this$props.position,\n          currentRefinement = _this$props.currentRefinement,\n          refine = _this$props.refine,\n          children = _this$props.children;\n      var _this$state = this.state,\n          isRefineOnMapMove = _this$state.isRefineOnMapMove,\n          hasMapMoveSinceLastRefine = _this$state.hasMapMoveSinceLastRefine;\n      return children({\n        toggleRefineOnMapMove: this.toggleRefineOnMapMove,\n        setMapMoveSinceLastRefine: this.setMapMoveSinceLastRefine,\n        hits: hits,\n        isRefinedWithMap: isRefinedWithMap,\n        isRefineOnMapMove: isRefineOnMapMove,\n        // @MAJOR hasMapMoveSinceLastRefine -> hasMapMovedSinceLastRefine\n        hasMapMoveSinceLastRefine: hasMapMoveSinceLastRefine,\n        position: position,\n        currentRefinement: currentRefinement,\n        refine: refine\n      });\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var position = props.position,\n          currentRefinement = props.currentRefinement;\n      var previousPosition = state.previousPosition,\n          previousCurrentRefinement = state.previousCurrentRefinement;\n      var positionChanged = !isEqualPosition(previousPosition, position);\n      var currentRefinementChanged = !isEqualCurrentRefinement(previousCurrentRefinement, currentRefinement);\n      var sliceNextState = {\n        previousPosition: position,\n        previousCurrentRefinement: currentRefinement\n      };\n\n      if (positionChanged || currentRefinementChanged) {\n        return _objectSpread({}, sliceNextState, {\n          hasMapMoveSinceLastRefine: false\n        });\n      }\n\n      return sliceNextState;\n    }\n  }]);\n\n  return Connector;\n}(Component);\n\n_defineProperty(Connector, \"propTypes\", {\n  hits: PropTypes.arrayOf(PropTypes.object).isRequired,\n  isRefinedWithMap: PropTypes.bool.isRequired,\n  enableRefineOnMapMove: PropTypes.bool.isRequired,\n  refine: PropTypes.func.isRequired,\n  children: PropTypes.func.isRequired,\n  position: LatLngPropType,\n  currentRefinement: BoundingBoxPropType\n});\n\nexport default connectGeoSearch(Connector);"]},"metadata":{},"sourceType":"module"}