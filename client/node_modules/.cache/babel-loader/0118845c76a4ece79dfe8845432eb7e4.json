{"ast":null,"code":"import _regeneratorRuntime from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/michellehu/ii-react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Modal from\"@material-ui/core/Modal\";import Backdrop from\"@material-ui/core/Backdrop\";import Fade from\"@material-ui/core/Fade\";import classes from'./EventModal.module.css';import TextField from'@material-ui/core/TextField';import Button from'../../shared/Button/Button';import DateTimePicker from'../../shared/DateTimePicker/DateTimePicker';import{FilePond,registerPlugin}from'react-filepond';import'filepond/dist/filepond.min.css';import FilePondPluginImageExifOrientation from'filepond-plugin-image-exif-orientation';import FilePondPluginImagePreview from'filepond-plugin-image-preview';import'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';import{createEvent,editEvent}from'../../../services/AdminService';registerPlugin(FilePondPluginImageExifOrientation,FilePondPluginImagePreview);var ReviewModal=/*#__PURE__*/function(_Component){_inherits(ReviewModal,_Component);function ReviewModal(props){var _this;_classCallCheck(this,ReviewModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReviewModal).call(this));_this.openModal=function(){_this.setState({open:true});};_this.closeModal=function(){_this.setState({open:false});};_this.pickDate=function(date){_this.setState({date:date});};_this.changeInput=function(e){e.preventDefault();_this.setState(_defineProperty({},e.target.name,e.target.value));};_this.submitForm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.state.title){_context.next=4;break;}alert(\"Please fill out the event's title.\");_context.next=39;break;case 4:if(_this.state.summary){_context.next=8;break;}alert(\"Please fill out the event's summary.\");_context.next=39;break;case 8:if(_this.state.location){_context.next=12;break;}alert(\"Please fill out the event's location.\");_context.next=39;break;case 12:if(_this.state.date){_context.next=16;break;}alert(\"Please fill out the event's date.\");_context.next=39;break;case 16:if(!(!_this.props.edit&&!_this.state.image)){_context.next=20;break;}alert(\"Please upload the event's image.\");_context.next=39;break;case 20:data={title:_this.state.title,summary:_this.state.summary,location:_this.state.location,date:_this.state.date,image:_this.state.image};_context.prev=21;if(_this.props.edit){_context.next=27;break;}_context.next=25;return createEvent(data);case 25:_context.next=29;break;case 27:_context.next=29;return editEvent(_this.state.id,data);case 29:_this.props.reloadData();_this.closeModal();_context.next=38;break;case 33:_context.prev=33;_context.t0=_context[\"catch\"](21);alert(\"Your event cannot be created/edited at this time.\");_this.closeModal();console.log(_context.t0);case 38:;case 39:case\"end\":return _context.stop();}}},_callee,null,[[21,33]]);}));_this.fileUpload=function(fileItems){if(fileItems.length){_this.setState({image:fileItems[0].file});}else{_this.setState({image:null});}};_this.state={open:false,id:props.id,title:props.title,summary:props.summary,location:props.location,date:props.date,image:null};_this.closeModal=_this.closeModal.bind(_assertThisInitialized(_this));_this.pickDate=_this.pickDate.bind(_assertThisInitialized(_this));_this.changeInput=_this.changeInput.bind(_assertThisInitialized(_this));_this.submitForm=_this.submitForm.bind(_assertThisInitialized(_this));return _this;}_createClass(ReviewModal,[{key:\"render\",value:function render(){var _this2=this;var button=this.props.edit?React.createElement(Button,{content:'Edit',click:this.openModal}):React.createElement(Button,{content:'Create Event',click:this.openModal});var header=this.props.edit?React.createElement(\"span\",null,\"Edit Selected Event\"):React.createElement(\"span\",null,\"Create A New Event\");return React.createElement(React.Fragment,null,button,React.createElement(Modal,{className:classes.Modal,open:this.state.open,onClose:this.closeModal,BackdropComponent:Backdrop,BackdropProps:{timeout:200}},React.createElement(Fade,{in:this.state.open},React.createElement(\"div\",{className:classes.reviewEditor},React.createElement(\"div\",{className:classes.title},header),React.createElement(\"form\",{enctype:\"multipart/form-data\"},React.createElement(TextField,{label:\"Title\",name:\"title\",required:true,value:this.state.title,margin:\"dense\",fullWidth:true,variant:\"outlined\",onChange:this.changeInput}),React.createElement(DateTimePicker,{pickDate:this.pickDate,initialVal:this.state.date}),React.createElement(TextField,{label:\"Location\",name:\"location\",required:true,margin:\"dense\",value:this.state.location,fullWidth:true,variant:\"outlined\",onChange:this.changeInput}),React.createElement(TextField,{label:\"Summary\",name:\"summary\",required:true,margin:\"dense\",value:this.state.summary,fullWidth:true,multiline:true,rows:\"5\",variant:\"outlined\",onChange:this.changeInput}),React.createElement(FilePond,{ref:function ref(_ref2){return _this2.pond=_ref2;},allowMultiple:false,onupdatefiles:function onupdatefiles(fileItems){return _this2.fileUpload(fileItems);}}),React.createElement(\"div\",{className:classes.buttons},React.createElement(Button,{content:'Cancel',inverted:true,click:this.closeModal}),React.createElement(Button,{content:'Submit',click:this.submitForm})))))));}}]);return ReviewModal;}(Component);export default ReviewModal;","map":{"version":3,"sources":["/Users/michellehu/ii-react/client/src/components/AdminPage/EventModal/EventModal.js"],"names":["React","Component","Modal","Backdrop","Fade","classes","TextField","Button","DateTimePicker","FilePond","registerPlugin","FilePondPluginImageExifOrientation","FilePondPluginImagePreview","createEvent","editEvent","ReviewModal","props","openModal","setState","open","closeModal","pickDate","date","changeInput","e","preventDefault","target","name","value","submitForm","state","title","alert","summary","location","edit","image","data","id","reloadData","console","log","fileUpload","fileItems","length","file","bind","button","header","timeout","reviewEditor","ref","pond","buttons"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport classes from './EventModal.module.css';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '../../shared/Button/Button';\nimport DateTimePicker from '../../shared/DateTimePicker/DateTimePicker';\n\nimport { FilePond, registerPlugin } from 'react-filepond';\nimport 'filepond/dist/filepond.min.css';\nimport FilePondPluginImageExifOrientation from 'filepond-plugin-image-exif-orientation';\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';\n\nimport { createEvent, editEvent } from '../../../services/AdminService';\n\nregisterPlugin(FilePondPluginImageExifOrientation, FilePondPluginImagePreview);\n\nclass ReviewModal extends Component {\n    constructor(props) {\n        super();\n        this.state = {\n            open: false,\n            id: props.id,\n            title: props.title,\n            summary: props.summary,\n            location: props.location,\n            date: props.date,\n            image: null\n        }\n\n        this.closeModal = this.closeModal.bind(this);\n        this.pickDate = this.pickDate.bind(this);\n        this.changeInput = this.changeInput.bind(this);\n        this.submitForm = this.submitForm.bind(this);\n    }\n\n    openModal = () => {\n        this.setState({ open: true });\n    }\n\n    closeModal = () => {\n        this.setState({ open: false });\n    }\n\n    pickDate = (date) => {\n        this.setState({ date: date });\n    }\n\n    changeInput = (e) => {\n        e.preventDefault();\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n    submitForm = async () => {\n        if (!this.state.title) {\n            alert(`Please fill out the event's title.`);\n        } else if (!this.state.summary) {\n            alert(`Please fill out the event's summary.`);\n        } else if (!this.state.location) {\n            alert(`Please fill out the event's location.`);\n        } else if (!this.state.date) {\n            alert(`Please fill out the event's date.`);\n        } else if (!this.props.edit && !this.state.image) {\n            alert(`Please upload the event's image.`);\n        } else {\n            const data = {\n                title: this.state.title,\n                summary: this.state.summary,\n                location: this.state.location,\n                date: this.state.date,\n                image: this.state.image\n            }\n            try {\n                if (!this.props.edit) {\n                    await createEvent(data);\n                } else {\n                    await editEvent(this.state.id, data);\n                }\n\n                this.props.reloadData();\n                this.closeModal();\n            }\n            catch (e) {\n                alert(\"Your event cannot be created/edited at this time.\");\n                this.closeModal();\n                console.log(e)\n            };\n\n        }\n    }\n\n    fileUpload = (fileItems) => {\n        if (fileItems.length) {\n            this.setState({\n                image: fileItems[0].file\n            })\n        } else {\n            this.setState({\n                image: null\n            })\n        }\n    }\n\n    render() {\n        const button = (this.props.edit) ?\n            <Button content={'Edit'} click={this.openModal} />\n            : <Button content={'Create Event'} click={this.openModal} />;\n        const header = (this.props.edit) ?\n            <span>Edit Selected Event</span>\n            : <span>Create A New Event</span>;\n\n        return (\n            <>\n                {button}\n\n                <Modal className={classes.Modal}\n                    open={this.state.open}\n                    onClose={this.closeModal}\n                    BackdropComponent={Backdrop}\n                    BackdropProps={{ timeout: 200 }}>\n                    <Fade in={this.state.open}>\n                        <div className={classes.reviewEditor}>\n                            <div className={classes.title}>{header}</div>\n                            <form enctype=\"multipart/form-data\">\n                                <TextField label=\"Title\"\n                                    name=\"title\"\n                                    required\n                                    value={this.state.title}\n                                    margin=\"dense\"\n                                    fullWidth\n                                    variant=\"outlined\"\n                                    onChange={this.changeInput} />\n                                <DateTimePicker pickDate={this.pickDate} initialVal={this.state.date} />\n                                <TextField label=\"Location\"\n                                    name=\"location\"\n                                    required\n                                    margin=\"dense\"\n                                    value={this.state.location}\n                                    fullWidth\n                                    variant=\"outlined\"\n                                    onChange={this.changeInput} />\n                                <TextField label=\"Summary\"\n                                    name=\"summary\"\n                                    required\n                                    margin=\"dense\"\n                                    value={this.state.summary}\n                                    fullWidth\n                                    multiline\n                                    rows=\"5\"\n                                    variant=\"outlined\"\n                                    onChange={this.changeInput} />\n\n                                <FilePond ref={ref => (this.pond = ref)}\n                                    allowMultiple={false}\n                                    onupdatefiles={fileItems => this.fileUpload(fileItems)} />\n\n                                <div className={classes.buttons}>\n                                    <Button content={'Cancel'} inverted click={this.closeModal} />\n                                    <Button content={'Submit'} click={this.submitForm} />\n                                </div>\n                            </form>\n                        </div>\n                    </Fade>\n                </Modal>\n            </>\n        )\n    }\n}\n\nexport default ReviewModal;\n"]},"metadata":{},"sourceType":"module"}