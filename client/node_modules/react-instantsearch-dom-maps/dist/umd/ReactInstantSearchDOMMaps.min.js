/*! React InstantSearchDOMMaps 6.3.0 | Â© Algolia, inc. | https://github.com/algolia/react-instantsearch */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react"),require("react-instantsearch-dom"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-instantsearch-dom","react-dom"],n):n((e=e||self).ReactInstantSearchDOMMaps={},e.React,e.ReactInstantSearchDOM,e.ReactDOM)}(this,function(e,a,n,t){"use strict";var h="default"in a?a.default:a;function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,n,t){return n&&o(e.prototype,n),t&&o(e,t),e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return(r="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(e){return i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":i(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,n){return!n||"object"!==r(n)&&"function"!=typeof n?s(e):n}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,n){return(c=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function d(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&c(e,n)}function m(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t=t&&t.hasOwnProperty("default")?t.default:t;var v="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};v.setTimeout,v.clearTimeout;var g=v.performance||{};g.now||g.mozNow||g.msNow||g.oNow||g.webkitNow;function M(e,n){return e(n={exports:{}},n.exports),n.exports}var y=Object.getOwnPropertySymbols,b=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(e){return n[e]}).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}})()&&Object.assign;function R(){}M(function(e){e.exports=function(){function e(e,n,t,o,i,r){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function n(){return e}var t={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n};return t.checkPropTypes=R,t.PropTypes=t}()});var S=function(e){function r(){var e,n;u(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return m(s(n=p(this,(e=f(r)).call.apply(e,[this].concat(o)))),"state",{google:null}),m(s(n),"isUnmounting",!1),n}return d(r,a.Component),l(r,[{key:"componentDidMount",value:function(){var a=this;return Promise.resolve().then(function(){return X}).then(function(e){var n=e.default,t=a.props,o=t.apiKey,i=t.endpoint,r=-1!==i.indexOf("?")?"&":"?";n("".concat(i).concat(r,"key=").concat(o),function(){a.isUnmounting||a.setState(function(){return{google:window.google}})})})}},{key:"componentWillUnmount",value:function(){this.isUnmounting=!0}},{key:"render",value:function(){return this.state.google?this.props.children(this.state.google):null}}]),r}();function k(){return(k=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function L(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],0<=n.indexOf(t)||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],0<=n.indexOf(t)||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function P(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(e){m(n,e,t[e])})}return n}function w(e,n){return e===n||void 0!==e&&void 0!==n&&(e.lat===n.lat&&e.lng===n.lng)}m(S,"defaultProps",{endpoint:"https://maps.googleapis.com/maps/api/js?v=quarterly"});var E=function(e){function r(){var e,n;u(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return m(s(n=p(this,(e=f(r)).call.apply(e,[this].concat(o)))),"state",{isRefineOnMapMove:n.props.enableRefineOnMapMove,hasMapMoveSinceLastRefine:!1,previousPosition:n.props.position,previousCurrentRefinement:n.props.currentRefinement}),m(s(n),"toggleRefineOnMapMove",function(){return n.setState(function(e){return{isRefineOnMapMove:!e.isRefineOnMapMove}})}),m(s(n),"setMapMoveSinceLastRefine",function(e){n.state.hasMapMoveSinceLastRefine!==e&&n.setState(function(){return{hasMapMoveSinceLastRefine:e}})}),n}return d(r,a.Component),l(r,[{key:"render",value:function(){var e=this.props,n=e.hits,t=e.isRefinedWithMap,o=e.position,i=e.currentRefinement,r=e.refine,a=e.children,s=this.state,c=s.isRefineOnMapMove,u=s.hasMapMoveSinceLastRefine;return a({toggleRefineOnMapMove:this.toggleRefineOnMapMove,setMapMoveSinceLastRefine:this.setMapMoveSinceLastRefine,hits:n,isRefinedWithMap:t,isRefineOnMapMove:c,hasMapMoveSinceLastRefine:u,position:o,currentRefinement:i,refine:r})}}],[{key:"getDerivedStateFromProps",value:function(e,n){var t,o,i=e.position,r=e.currentRefinement,a=n.previousPosition,s=n.previousCurrentRefinement,c=!w(a,i),u=!((t=s)===(o=r)||void 0!==t&&void 0!==o&&w(t.northEast,o.northEast)&&w(t.southWest,o.southWest)),l={previousPosition:i,previousCurrentRefinement:r};return c||u?P({},l,{hasMapMoveSinceLastRefine:!1}):l}}]),r}(),C=n.connectGeoSearch(E),I=h.createContext({isRefineOnMapMove:!0,hasMapMoveSinceLastRefine:!1,toggleRefineOnMapMove:function(){},setMapMoveSinceLastRefine:function(){},refineWithInstance:function(){}}),j=function(e){function r(){var e,i;u(this,r);for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return m(s(i=p(this,(e=f(r)).call.apply(e,[this].concat(t)))),"isPendingRefine",!1),m(s(i),"boundingBox",null),m(s(i),"previousBoundingBox",null),m(s(i),"refineWithInstance",function(e){var n=i.props.refine,t=e.getBounds();n({northEast:t.getNorthEast().toJSON(),southWest:t.getSouthWest().toJSON()})}),m(s(i),"mapValue",{isRefineOnMapMove:i.props.isRefineOnMapMove,hasMapMoveSinceLastRefine:i.props.hasMapMoveSinceLastRefine,toggleRefineOnMapMove:i.props.toggleRefineOnMapMove,setMapMoveSinceLastRefine:i.props.setMapMoveSinceLastRefine,refineWithInstance:i.refineWithInstance}),m(s(i),"getMapValue",function(){return(i.mapValue.isRefineOnMapMove!==i.props.isRefineOnMapMove||i.mapValue.hasMapMoveSinceLastRefine!==i.props.hasMapMoveSinceLastRefine)&&(i.mapValue=P({},i.mapValue,{isRefineOnMapMove:i.props.isRefineOnMapMove,hasMapMoveSinceLastRefine:i.props.hasMapMoveSinceLastRefine})),i.mapValue}),m(s(i),"onChange",function(){var e=i.props,n=e.isRefineOnMapMove,t=e.isRefineEnable,o=e.setMapMoveSinceLastRefine;t&&(o(!0),n&&(i.isPendingRefine=!0))}),m(s(i),"onIdle",function(e){var n=e.instance;i.isPendingRefine&&(i.isPendingRefine=!1,i.refineWithInstance(n))}),m(s(i),"shouldUpdate",function(){var e=i.props.hasMapMoveSinceLastRefine;return!i.isPendingRefine&&!e}),i}return d(r,a.Component),l(r,[{key:"createBoundingBoxFromHits",value:function(e){var n=this.props.google,t=e.reduce(function(e,n){return e.extend(n._geoloc)},new n.maps.LatLngBounds);return{northEast:t.getNorthEast().toJSON(),southWest:t.getSouthWest().toJSON()}}},{key:"render",value:function(){var e=this.props,n=e.hits,t=e.currentRefinement,o=e.children,i=t?0:void 0,r=!t&&Boolean(n.length)?this.createBoundingBoxFromHits(n):t;return h.createElement(I.Provider,{value:this.getMapValue()},o({onChange:this.onChange,onIdle:this.onIdle,shouldUpdate:this.shouldUpdate,boundingBox:r,boundingBoxPadding:i}))}}]),r}(),x=h.createContext({google:{},instance:{}}),N=n.createClassNames("GeoSearch"),W=function(e){function r(){var e,n;u(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return m(s(n=p(this,(e=f(r)).call.apply(e,[this].concat(o)))),"isUserInteraction",!0),m(s(n),"isPendingRefine",!1),m(s(n),"listeners",[]),m(s(n),"mapRef",a.createRef()),m(s(n),"state",{isMapReady:!1}),m(s(n),"setupListenersWhenMapIsReady",function(){n.listeners=[],n.setState({isMapReady:!0,value:{google:n.props.google,instance:n.instance}});var e=function(){n.isUserInteraction&&n.props.onChange()};n.listeners.push(n.instance.addListener("center_changed",e)),n.listeners.push(n.instance.addListener("zoom_changed",e)),n.listeners.push(n.instance.addListener("dragstart",e)),n.listeners.push(n.instance.addListener("idle",function(){n.isUserInteraction&&n.props.onIdle({instance:n.instance})}))}),n}return d(r,a.Component),l(r,[{key:"componentDidMount",value:function(){var e=this.props,n=e.google,t=e.mapOptions;this.instance=new n.maps.Map(this.mapRef.current,P({mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1,clickableIcons:!1,zoomControlOptions:{position:n.maps.ControlPosition.LEFT_TOP}},t)),this.listeners.push(n.maps.event.addListenerOnce(this.instance,"idle",this.setupListenersWhenMapIsReady))}},{key:"componentDidUpdate",value:function(){var e=this,n=this.props,t=n.google,o=n.initialZoom,i=n.initialPosition,r=n.boundingBox,a=n.boundingBoxPadding;(0,n.shouldUpdate)()&&(r?this.lockUserInteration(function(){e.instance.fitBounds(new t.maps.LatLngBounds(r.southWest,r.northEast),a)}):this.lockUserInteration(function(){e.instance.setZoom(o),e.instance.setCenter(i)}))}},{key:"componentWillUnmount",value:function(){this.listeners.forEach(function(e){e.remove()}),this.listeners=[]}},{key:"lockUserInteration",value:function(e){this.isUserInteraction=!1,e(),this.isUserInteraction=!0}},{key:"render",value:function(){var e=this.props.children,n=this.state.isMapReady;return h.createElement("div",{className:N("")},h.createElement("div",{ref:this.mapRef,className:N("map")}),n&&h.createElement(x.Provider,{value:this.state.value},e))}}]),r}(),_=function(e){function r(){var e,i;u(this,r);for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return m(s(i=p(this,(e=f(r)).call.apply(e,[this].concat(t)))),"renderChildrenWithBoundFunction",function(e){var a=e.hits,s=e.position,n=L(e,["hits","position"]),t=i.props,c=t.google,u=t.children,l=t.initialZoom,p=t.initialPosition,o=t.enableRefine,f=(t.enableRefineOnMapMove,t.defaultRefinement,L(t,["google","children","initialZoom","initialPosition","enableRefine","enableRefineOnMapMove","defaultRefinement"]));return h.createElement(j,k({},n,{testID:"Provider",google:c,hits:a,position:s,isRefineEnable:o}),function(e){var n=e.boundingBox,t=e.boundingBoxPadding,o=e.onChange,i=e.onIdle,r=e.shouldUpdate;return h.createElement(W,{testID:"GoogleMaps",google:c,initialZoom:l,initialPosition:s||p,mapOptions:f,boundingBox:n,boundingBoxPadding:t,onChange:o,onIdle:i,shouldUpdate:r},u({hits:a}))})}),i}return d(r,a.Component),l(r,[{key:"render",value:function(){var e=this.props,n=e.enableRefineOnMapMove,t=e.defaultRefinement;return h.createElement(C,{testID:"Connector",enableRefineOnMapMove:n,defaultRefinement:t},this.renderChildrenWithBoundFunction)}}]),r}();m(_,"defaultProps",{initialZoom:1,initialPosition:{lat:0,lng:0},enableRefine:!0,enableRefineOnMapMove:!0,defaultRefinement:null});var U,B=function(e,t,o){var n=Object.keys(e),i=Object.keys(t).filter(function(e){return-1!==n.indexOf(e)}).map(function(n){return o.addListener(e[n],function(e){t[n]({event:e,marker:o})})});return function(){i.forEach(function(e){return e.remove()})}},D=function(i){return function(o){return h.createElement(x.Consumer,null,function(e){var n=e.google,t=e.instance;return h.createElement(i,k({},o,{google:n,googleMapsInstance:t}))})}},T={onClick:"click",onDoubleClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup"},V=["children"].concat(Object.keys(T)),A=(U=V,function(t){return Object.keys(t).filter(function(e){return-1===U.indexOf(e)}).reduce(function(e,n){return P({},e,m({},n,t[n]))},{})}),G=D(function(e){function n(){return u(this,n),p(this,f(n).apply(this,arguments))}return d(n,a.Component),l(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.google,t=e.googleMapsInstance,o=e.hit,i=L(e,["google","googleMapsInstance","hit"]);this.instance=new n.maps.Marker(P({},A(i),{map:t,position:o._geoloc})),this.removeEventsListeners=B(T,this.props,this.instance)}},{key:"componentDidUpdate",value:function(){this.removeEventsListeners(),this.removeEventsListeners=B(T,this.props,this.instance)}},{key:"componentWillUnmount",value:function(){this.instance.setMap(null)}},{key:"render",value:function(){return null}}]),n}()),q={onClick:"click",onDoubleClick:"dblclick",onMouseDown:"mousedown",onMouseEnter:"mouseenter",onMouseLeave:"mouseleave",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup"},F=function(e){function r(){var e,n;u(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return m(s(n=p(this,(e=f(r)).call.apply(e,[this].concat(o)))),"state",{marker:null}),n}return d(r,a.Component),l(r,[{key:"componentDidMount",value:function(){var c,e=this.props,n=e.hit,t=e.google,o=e.googleMapsInstance,i=e.className,r=e.anchor,a=new(c=t,function(e){function s(e){var n,t=e.position,o=e.map,i=e.className,r=e.anchor,a=void 0===r?{x:0,y:0}:r;return u(this,s),(n=p(this,f(s).call(this))).anchor=a,n.subscriptions=[],n.latLng=new c.maps.LatLng(t),n.element=document.createElement("div"),n.element.className=i,n.element.style.position="absolute",n.element.style.whiteSpace="nowrap",n.setMap(o),n}return d(s,c.maps.OverlayView),l(s,[{key:"onAdd",value:function(){this.getPanes()&&this.getPanes().overlayMouseTarget.appendChild(this.element)}},{key:"draw",value:function(){if(this.getProjection()){var e=this.getProjection().fromLatLngToDivPixel(this.latLng),n=this.anchor.x+this.element.offsetWidth/2,t=this.anchor.y+this.element.offsetHeight;this.element.style.left="".concat(Math.round(e.x-n),"px"),this.element.style.top="".concat(Math.round(e.y-t),"px"),this.element.style.zIndex=parseInt(this.element.style.top,10)}}},{key:"onRemove",value:function(){this.element&&this.element.parentNode&&(this.element.parentNode.removeChild(this.element),this.subscriptions.forEach(function(e){return e.remove()}),delete this.element,this.subscriptions=[])}},{key:"addListener",value:function(e,n){var t=this,o={remove:function(){t.element.removeEventListener(e,n),t.subscriptions=t.subscriptions.filter(function(e){return e!==o})}};return this.element.addEventListener(e,n),this.subscriptions=this.subscriptions.concat(o),o}},{key:"getPosition",value:function(){return this.latLng}}]),s}())({map:o,position:n._geoloc,className:i,anchor:r});this.removeListeners=B(q,this.props,a),this.setState(function(){return{marker:a}})}},{key:"componentDidUpdate",value:function(){var e=this.props.children,n=this.state.marker;this.removeListeners(),this.removeListeners=B(q,this.props,n),r.isReact16()||t.unstable_renderSubtreeIntoContainer(this,e,n.element)}},{key:"componentWillUnmount",value:function(){var e=this.state.marker;r.isReact16()||t.unmountComponentAtNode(e.element),e.setMap(null)}},{key:"render",value:function(){var e=this.props.children,n=this.state.marker;return n&&r.isReact16()?t.createPortal(e,n.element):null}}],[{key:"isReact16",value:function(){return"function"==typeof t.createPortal}}]),r}();m(F,"defaultProps",{className:"",anchor:{x:0,y:0}});var Z=D(F),z=n.createClassNames("GeoSearch"),H=function(e){var n=e.googleMapsInstance,t=e.translate,o=e.hasMapMoveSinceLastRefine,i=e.refineWithInstance;return h.createElement("div",{className:z("control")},h.createElement("button",{className:z("redo",!o&&"redo--disabled"),disabled:!o,onClick:function(){return i(n)}},t("redo")))},J=n.translatable({redo:"Redo search here"})(D(function(o){return h.createElement(I.Consumer,null,function(e){var n=e.hasMapMoveSinceLastRefine,t=e.refineWithInstance;return h.createElement(H,k({},o,{hasMapMoveSinceLastRefine:n,refineWithInstance:t}))})})),K=n.createClassNames("GeoSearch"),Y=function(e){var n=e.googleMapsInstance,t=e.translate,o=e.isRefineOnMapMove,i=e.hasMapMoveSinceLastRefine,r=e.toggleRefineOnMapMove,a=e.refineWithInstance;return h.createElement("div",{className:K("control")},o||!i?h.createElement("label",{className:K("label")},h.createElement("input",{className:K("input"),type:"checkbox",checked:o,onChange:r}),t("control")):h.createElement("button",{className:K("redo"),onClick:function(){return a(n)}},t("redo")))},$=n.translatable({control:"Search as I move the map",redo:"Redo search here"})(D(function(r){return h.createElement(I.Consumer,null,function(e){var n=e.isRefineOnMapMove,t=e.hasMapMoveSinceLastRefine,o=e.toggleRefineOnMapMove,i=e.refineWithInstance;return h.createElement(Y,k({},r,{isRefineOnMapMove:n,hasMapMoveSinceLastRefine:t,toggleRefineOnMapMove:o,refineWithInstance:i}))})})),Q=M(function(t){!function(e,n){t.exports?t.exports=n():this.$script=n()}(0,function(){var u,i,r=document,a=r.getElementsByTagName("head")[0],s=!1,l="push",c="readyState",p="onreadystatechange",f={},h={},d={};function m(e,n){for(var t=0,o=e.length;t<o;++t)if(!n(e[t]))return s;return 1}function v(e,n){m(e,function(e){return!n(e)})}function g(e,n,t){e=e[l]?e:[e];var o=n&&n.call,i=o?n:t,r=o?e.join(""):n,a=e.length;function s(e){return e.call?e():f[e]}function c(){if(!--a)for(var e in f[r]=1,i&&i(),h)m(e.split("|"),s)&&!v(h[e],s)&&(h[e]=[])}return setTimeout(function(){v(e,function e(n,t){return null===n?c():(t||/^https?:\/\//.test(n)||!u||(n=-1===n.indexOf(".js")?u+n+".js":u+n),d[n]?2==d[n]?c():setTimeout(function(){e(n,!0)},0):(d[n]=1,void M(n,c)))})},0),g}function M(e,n){var t,o=r.createElement("script");o.onload=o.onerror=o[p]=function(){o[c]&&!/^c|loade/.test(o[c])||t||(o.onload=o[p]=null,t=1,d[e]=2,n())},o.async=1,o.src=i?e+(-1===e.indexOf("?")?"?":"&")+i:e,a.insertBefore(o,a.lastChild)}return g.get=M,g.order=function(t,o,i){!function e(n){n=t.shift(),t.length?g(n,e):g(n,o,i)}()},g.path=function(e){u=e},g.urlArgs=function(e){i=e},g.ready=function(e,n,t){e=e[l]?e:[e];var o,i=[];return!v(e,function(e){f[e]||i[l](e)})&&m(e,function(e){return f[e]})?n():(o=e.join("|"),h[o]=h[o]||[],h[o][l](n),t&&t(i)),g},g.done=function(e){g([null],e)},g})}),X=Object.freeze({default:Q,__moduleExports:Q});e.Control=$,e.CustomMarker=Z,e.GeoSearch=_,e.GoogleMapsLoader=S,e.Marker=G,e.Redo=J,e.withGoogleMaps=D,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ReactInstantSearchDOMMaps.min.js.map
