{"version":3,"file":"ReactInstantSearchDOMMaps.min.js","sources":["../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../../../node_modules/@babel/runtime/helpers/esm/createClass.js","../../../../node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../../../../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../../../../node_modules/@babel/runtime/helpers/esm/inherits.js","../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../../node_modules/rollup-plugin-node-globals/src/global.js","../../../../node_modules/process-es6/browser.js","../../../../node_modules/object-assign/index.js","../../../../node_modules/prop-types/factoryWithThrowingShims.js","../../../../node_modules/prop-types/index.js","../../../../node_modules/prop-types/lib/ReactPropTypesSecret.js","../../src/GoogleMapsLoader.js","../../../../node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../../node_modules/@babel/runtime/helpers/esm/objectSpread.js","../../src/Connector.js","../../src/GeoSearchContext.ts","../../src/Provider.js","../../src/GoogleMapsContext.ts","../../src/GoogleMaps.js","../../src/GeoSearch.js","../../src/utils.js","../../src/withGoogleMaps.tsx","../../src/Marker.js","../../src/CustomMarker.js","../../src/elements/createHTMLMarker.js","../../src/Redo.js","../../src/Control.js","../../../../node_modules/scriptjs/dist/script.js"],"sourcesContent":["export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass GoogleMapsLoader extends Component {\n  static propTypes = {\n    apiKey: PropTypes.string.isRequired,\n    children: PropTypes.func.isRequired,\n    endpoint: PropTypes.string,\n  };\n\n  static defaultProps = {\n    endpoint: 'https://maps.googleapis.com/maps/api/js?v=quarterly',\n  };\n\n  state = {\n    google: null,\n  };\n\n  isUnmounting = false;\n\n  componentDidMount() {\n    // Inline the import to avoid to run the module on the server (rely on `document`)\n    // Under the hood we use `dynamic-import-node` to transpile the `import` to `require`\n    // see: https://github.com/algolia/react-instantsearch/issues/1425\n    return import('scriptjs').then(({ default: injectScript }) => {\n      const { apiKey, endpoint } = this.props;\n      const operator = endpoint.indexOf('?') !== -1 ? '&' : '?';\n      const endpointWithCredentials = `${endpoint}${operator}key=${apiKey}`;\n\n      injectScript(endpointWithCredentials, () => {\n        if (!this.isUnmounting) {\n          this.setState(() => ({\n            google: window.google,\n          }));\n        }\n      });\n    });\n  }\n\n  componentWillUnmount() {\n    this.isUnmounting = true;\n  }\n\n  render() {\n    if (!this.state.google) {\n      return null;\n    }\n\n    return this.props.children(this.state.google);\n  }\n}\n\nexport default GoogleMapsLoader;\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connectGeoSearch } from 'react-instantsearch-dom';\nimport { LatLngPropType, BoundingBoxPropType } from './propTypes';\n\nfunction isEqualPosition(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  return a.lat === b.lat && a.lng === b.lng;\n}\n\nfunction isEqualCurrentRefinement(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  return (\n    isEqualPosition(a.northEast, b.northEast) &&\n    isEqualPosition(a.southWest, b.southWest)\n  );\n}\n\nexport class Connector extends Component {\n  static propTypes = {\n    hits: PropTypes.arrayOf(PropTypes.object).isRequired,\n    isRefinedWithMap: PropTypes.bool.isRequired,\n    enableRefineOnMapMove: PropTypes.bool.isRequired,\n    refine: PropTypes.func.isRequired,\n    children: PropTypes.func.isRequired,\n    position: LatLngPropType,\n    currentRefinement: BoundingBoxPropType,\n  };\n\n  static getDerivedStateFromProps(props, state) {\n    const { position, currentRefinement } = props;\n    const { previousPosition, previousCurrentRefinement } = state;\n\n    const positionChanged = !isEqualPosition(previousPosition, position);\n    const currentRefinementChanged = !isEqualCurrentRefinement(\n      previousCurrentRefinement,\n      currentRefinement\n    );\n\n    const sliceNextState = {\n      previousPosition: position,\n      previousCurrentRefinement: currentRefinement,\n    };\n\n    if (positionChanged || currentRefinementChanged) {\n      return {\n        ...sliceNextState,\n        hasMapMoveSinceLastRefine: false,\n      };\n    }\n\n    return sliceNextState;\n  }\n\n  state = {\n    isRefineOnMapMove: this.props.enableRefineOnMapMove,\n    hasMapMoveSinceLastRefine: false,\n    previousPosition: this.props.position,\n    previousCurrentRefinement: this.props.currentRefinement,\n  };\n\n  toggleRefineOnMapMove = () =>\n    this.setState(({ isRefineOnMapMove }) => ({\n      isRefineOnMapMove: !isRefineOnMapMove,\n    }));\n\n  setMapMoveSinceLastRefine = next => {\n    const { hasMapMoveSinceLastRefine } = this.state;\n\n    if (hasMapMoveSinceLastRefine === next) {\n      return;\n    }\n\n    this.setState(() => ({\n      hasMapMoveSinceLastRefine: next,\n    }));\n  };\n\n  render() {\n    const {\n      hits,\n      isRefinedWithMap,\n      position,\n      currentRefinement,\n      refine,\n      children,\n    } = this.props;\n\n    const { isRefineOnMapMove, hasMapMoveSinceLastRefine } = this.state;\n\n    return children({\n      toggleRefineOnMapMove: this.toggleRefineOnMapMove,\n      setMapMoveSinceLastRefine: this.setMapMoveSinceLastRefine,\n      hits,\n      isRefinedWithMap,\n      isRefineOnMapMove,\n      // @MAJOR hasMapMoveSinceLastRefine -> hasMapMovedSinceLastRefine\n      hasMapMoveSinceLastRefine,\n      position,\n      currentRefinement,\n      refine,\n    });\n  }\n}\n\nexport default connectGeoSearch(Connector);\n","import React from 'react';\n\ntype GeoSearchContextState = {\n  isRefineOnMapMove: boolean;\n  hasMapMoveSinceLastRefine: boolean;\n  toggleRefineOnMapMove: () => void;\n  setMapMoveSinceLastRefine: (value: boolean) => void;\n  refineWithInstance: (value: google.maps.Map) => void;\n};\n\nconst GeoSearchContext = React.createContext<GeoSearchContextState>({\n  // The actual default value comes from the prop of the component\n  // wrapping the `Provider`.\n  isRefineOnMapMove: true,\n  hasMapMoveSinceLastRefine: false,\n  toggleRefineOnMapMove: () => {},\n  setMapMoveSinceLastRefine: () => {},\n  refineWithInstance: () => {},\n});\n\nexport default GeoSearchContext;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { LatLngPropType, BoundingBoxPropType } from './propTypes';\nimport GeoSearchContext from './GeoSearchContext';\n\nclass Provider extends Component {\n  static propTypes = {\n    google: PropTypes.object.isRequired,\n    hits: PropTypes.arrayOf(PropTypes.object).isRequired,\n    isRefineOnMapMove: PropTypes.bool.isRequired,\n    hasMapMoveSinceLastRefine: PropTypes.bool.isRequired,\n    isRefineEnable: PropTypes.bool.isRequired,\n    refine: PropTypes.func.isRequired,\n    toggleRefineOnMapMove: PropTypes.func.isRequired,\n    setMapMoveSinceLastRefine: PropTypes.func.isRequired,\n    children: PropTypes.func.isRequired,\n    position: LatLngPropType,\n    currentRefinement: BoundingBoxPropType,\n  };\n\n  isPendingRefine = false;\n  boundingBox = null;\n  previousBoundingBox = null;\n\n  refineWithInstance = instance => {\n    const { refine } = this.props;\n\n    const bounds = instance.getBounds();\n\n    refine({\n      northEast: bounds.getNorthEast().toJSON(),\n      southWest: bounds.getSouthWest().toJSON(),\n    });\n  };\n\n  mapValue = {\n    isRefineOnMapMove: this.props.isRefineOnMapMove,\n    hasMapMoveSinceLastRefine: this.props.hasMapMoveSinceLastRefine,\n    toggleRefineOnMapMove: this.props.toggleRefineOnMapMove,\n    setMapMoveSinceLastRefine: this.props.setMapMoveSinceLastRefine,\n    refineWithInstance: this.refineWithInstance,\n  };\n\n  getMapValue = () => {\n    const haveContextValuesChanges =\n      this.mapValue.isRefineOnMapMove !== this.props.isRefineOnMapMove ||\n      this.mapValue.hasMapMoveSinceLastRefine !==\n        this.props.hasMapMoveSinceLastRefine;\n\n    if (haveContextValuesChanges) {\n      this.mapValue = {\n        ...this.mapValue,\n        isRefineOnMapMove: this.props.isRefineOnMapMove,\n        hasMapMoveSinceLastRefine: this.props.hasMapMoveSinceLastRefine,\n      };\n    }\n\n    return this.mapValue;\n  };\n\n  createBoundingBoxFromHits(hits) {\n    const { google } = this.props;\n\n    const latLngBounds = hits.reduce(\n      (acc, hit) => acc.extend(hit._geoloc),\n      new google.maps.LatLngBounds()\n    );\n\n    return {\n      northEast: latLngBounds.getNorthEast().toJSON(),\n      southWest: latLngBounds.getSouthWest().toJSON(),\n    };\n  }\n\n  onChange = () => {\n    const {\n      isRefineOnMapMove,\n      isRefineEnable,\n      setMapMoveSinceLastRefine,\n    } = this.props;\n\n    if (isRefineEnable) {\n      setMapMoveSinceLastRefine(true);\n\n      if (isRefineOnMapMove) {\n        this.isPendingRefine = true;\n      }\n    }\n  };\n\n  onIdle = ({ instance }) => {\n    if (this.isPendingRefine) {\n      this.isPendingRefine = false;\n\n      this.refineWithInstance(instance);\n    }\n  };\n\n  shouldUpdate = () => {\n    const { hasMapMoveSinceLastRefine } = this.props;\n\n    return !this.isPendingRefine && !hasMapMoveSinceLastRefine;\n  };\n\n  render() {\n    const { hits, currentRefinement, children } = this.props;\n\n    // We use this value for differentiate the padding to apply during\n    // fitBounds. When we don't have a currenRefinement (boundingBox)\n    // we let GoogleMaps compute the automatic padding. But when we\n    // provide the currentRefinement we explicitly set the padding\n    // to `0` otherwise the map will decrease the zoom on each refine.\n    const boundingBoxPadding = !currentRefinement ? undefined : 0;\n    const boundingBox =\n      !currentRefinement && Boolean(hits.length)\n        ? this.createBoundingBoxFromHits(hits)\n        : currentRefinement;\n\n    return (\n      <GeoSearchContext.Provider value={this.getMapValue()}>\n        {children({\n          onChange: this.onChange,\n          onIdle: this.onIdle,\n          shouldUpdate: this.shouldUpdate,\n          boundingBox,\n          boundingBoxPadding,\n        })}\n      </GeoSearchContext.Provider>\n    );\n  }\n}\n\nexport default Provider;\n","import React from 'react';\n\nexport type GoogleMapsContextState = {\n  google: typeof google;\n  instance: google.maps.Map;\n};\n\nconst GoogleMapsContext = React.createContext<GoogleMapsContextState>({\n  // We mount the context only once the map is created. Thus, we can assume\n  // that the value provided through the context is never `undefined`. We can't\n  // create an instance at that point, hence the cast.\n  google: {} as typeof google,\n  instance: {} as google.maps.Map,\n});\n\nexport default GoogleMapsContext;\n","import React, { Component, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { createClassNames } from 'react-instantsearch-dom';\nimport { LatLngPropType, BoundingBoxPropType } from './propTypes';\nimport GoogleMapsContext from './GoogleMapsContext';\n\nconst cx = createClassNames('GeoSearch');\n\nclass GoogleMaps extends Component {\n  static propTypes = {\n    google: PropTypes.object.isRequired,\n    initialZoom: PropTypes.number.isRequired,\n    initialPosition: LatLngPropType.isRequired,\n    mapOptions: PropTypes.object.isRequired,\n    onChange: PropTypes.func.isRequired,\n    onIdle: PropTypes.func.isRequired,\n    shouldUpdate: PropTypes.func.isRequired,\n    boundingBox: BoundingBoxPropType,\n    boundingBoxPadding: PropTypes.number,\n    children: PropTypes.node,\n  };\n\n  isUserInteraction = true;\n  isPendingRefine = false;\n  listeners = [];\n  mapRef = createRef();\n\n  state = {\n    isMapReady: false,\n  };\n\n  componentDidMount() {\n    const { google, mapOptions } = this.props;\n\n    this.instance = new google.maps.Map(this.mapRef.current, {\n      mapTypeControl: false,\n      fullscreenControl: false,\n      streetViewControl: false,\n      clickableIcons: false,\n      zoomControlOptions: {\n        position: google.maps.ControlPosition.LEFT_TOP,\n      },\n      ...mapOptions,\n    });\n\n    this.listeners.push(\n      google.maps.event.addListenerOnce(\n        this.instance,\n        'idle',\n        this.setupListenersWhenMapIsReady\n      )\n    );\n  }\n\n  componentDidUpdate() {\n    const {\n      google,\n      initialZoom,\n      initialPosition,\n      boundingBox,\n      boundingBoxPadding,\n      shouldUpdate,\n    } = this.props;\n\n    if (!shouldUpdate()) {\n      return;\n    }\n\n    if (boundingBox) {\n      this.lockUserInteration(() => {\n        this.instance.fitBounds(\n          new google.maps.LatLngBounds(\n            boundingBox.southWest,\n            boundingBox.northEast\n          ),\n          boundingBoxPadding\n        );\n      });\n    } else {\n      this.lockUserInteration(() => {\n        this.instance.setZoom(initialZoom);\n        this.instance.setCenter(initialPosition);\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.listeners.forEach(listener => {\n      listener.remove();\n    });\n\n    this.listeners = [];\n  }\n\n  setupListenersWhenMapIsReady = () => {\n    this.listeners = [];\n\n    this.setState({\n      isMapReady: true,\n      value: {\n        google: this.props.google,\n        instance: this.instance,\n      },\n    });\n\n    const onChange = () => {\n      if (this.isUserInteraction) {\n        this.props.onChange();\n      }\n    };\n\n    this.listeners.push(this.instance.addListener('center_changed', onChange));\n    this.listeners.push(this.instance.addListener('zoom_changed', onChange));\n    this.listeners.push(this.instance.addListener('dragstart', onChange));\n\n    this.listeners.push(\n      this.instance.addListener('idle', () => {\n        if (this.isUserInteraction) {\n          this.props.onIdle({\n            instance: this.instance,\n          });\n        }\n      })\n    );\n  };\n\n  lockUserInteration(functionThatAltersTheMapPosition) {\n    this.isUserInteraction = false;\n    functionThatAltersTheMapPosition();\n    this.isUserInteraction = true;\n  }\n\n  render() {\n    const { children } = this.props;\n    const { isMapReady } = this.state;\n\n    return (\n      <div className={cx('')}>\n        <div ref={this.mapRef} className={cx('map')} />\n        {isMapReady && (\n          <GoogleMapsContext.Provider value={this.state.value}>\n            {children}\n          </GoogleMapsContext.Provider>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default GoogleMaps;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { LatLngPropType, BoundingBoxPropType } from './propTypes';\nimport Connector from './Connector';\nimport Provider from './Provider';\nimport GoogleMaps from './GoogleMaps';\n\nclass GeoSearch extends Component {\n  static propTypes = {\n    google: PropTypes.object.isRequired,\n    children: PropTypes.func.isRequired,\n    initialZoom: PropTypes.number,\n    initialPosition: LatLngPropType,\n    enableRefine: PropTypes.bool,\n    enableRefineOnMapMove: PropTypes.bool,\n    defaultRefinement: BoundingBoxPropType,\n  };\n\n  static defaultProps = {\n    initialZoom: 1,\n    initialPosition: { lat: 0, lng: 0 },\n    enableRefine: true,\n    enableRefineOnMapMove: true,\n    defaultRefinement: null,\n  };\n\n  renderChildrenWithBoundFunction = ({ hits, position, ...rest }) => {\n    const {\n      google,\n      children,\n      initialZoom,\n      initialPosition,\n      enableRefine,\n      enableRefineOnMapMove,\n      defaultRefinement,\n      ...mapOptions\n    } = this.props;\n\n    return (\n      <Provider\n        {...rest}\n        testID=\"Provider\"\n        google={google}\n        hits={hits}\n        position={position}\n        isRefineEnable={enableRefine}\n      >\n        {({\n          boundingBox,\n          boundingBoxPadding,\n          onChange,\n          onIdle,\n          shouldUpdate,\n        }) => (\n          <GoogleMaps\n            testID=\"GoogleMaps\"\n            google={google}\n            initialZoom={initialZoom}\n            initialPosition={position || initialPosition}\n            mapOptions={mapOptions}\n            boundingBox={boundingBox}\n            boundingBoxPadding={boundingBoxPadding}\n            onChange={onChange}\n            onIdle={onIdle}\n            shouldUpdate={shouldUpdate}\n          >\n            {children({ hits })}\n          </GoogleMaps>\n        )}\n      </Provider>\n    );\n  };\n\n  render() {\n    const { enableRefineOnMapMove, defaultRefinement } = this.props;\n\n    return (\n      <Connector\n        testID=\"Connector\"\n        enableRefineOnMapMove={enableRefineOnMapMove}\n        defaultRefinement={defaultRefinement}\n      >\n        {this.renderChildrenWithBoundFunction}\n      </Connector>\n    );\n  }\n}\n\nexport default GeoSearch;\n","import PropTypes from 'prop-types';\n\nexport const registerEvents = (events, props, instance) => {\n  const eventsAvailable = Object.keys(events);\n  const listeners = Object.keys(props)\n    .filter(key => eventsAvailable.indexOf(key) !== -1)\n    .map(name =>\n      instance.addListener(events[name], event => {\n        props[name]({ event, marker: instance });\n      })\n    );\n\n  return () => {\n    listeners.forEach(listener => listener.remove());\n  };\n};\n\nexport const createListenersPropTypes = eventTypes =>\n  Object.keys(eventTypes).reduce(\n    (acc, name) => ({ ...acc, [name]: PropTypes.func }),\n    {}\n  );\n\nexport const createFilterProps = excludes => props =>\n  Object.keys(props)\n    .filter(name => excludes.indexOf(name) === -1)\n    .reduce(\n      (acc, name) => ({\n        ...acc,\n        [name]: props[name],\n      }),\n      {}\n    );\n","import React from 'react';\nimport GoogleMapsContext from './GoogleMapsContext';\n\ntype Subtract<TProps, TSubstractedProps> = Omit<\n  TProps,\n  keyof TSubstractedProps\n>;\n\nexport interface WithGoogleMapsProps {\n  google: typeof google; // eslint-disable-line no-undef\n  googleMapsInstance: google.maps.Map;\n}\n\nconst withGoogleMaps = <TProps extends WithGoogleMapsProps>(\n  Wrapped: React.ComponentType<TProps>\n) => {\n  const WithGoogleMaps: React.FC<\n    Subtract<TProps, WithGoogleMapsProps>\n  > = props => (\n    <GoogleMapsContext.Consumer>\n      {({ google, instance }) => (\n        <Wrapped\n          // @TODO: remove the cast once TypeScript fixes the issue\n          // https://github.com/Microsoft/TypeScript/issues/28938\n          {...(props as TProps)}\n          google={google}\n          googleMapsInstance={instance}\n        />\n      )}\n    </GoogleMapsContext.Consumer>\n  );\n\n  return WithGoogleMaps;\n};\n\nexport default withGoogleMaps;\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  registerEvents,\n  createListenersPropTypes,\n  createFilterProps,\n} from './utils';\nimport { GeolocHitPropType } from './propTypes';\nimport withGoogleMaps from './withGoogleMaps';\n\nconst eventTypes = {\n  onClick: 'click',\n  onDoubleClick: 'dblclick',\n  onMouseDown: 'mousedown',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n};\n\nconst excludes = ['children'].concat(Object.keys(eventTypes));\nconst filterProps = createFilterProps(excludes);\n\nexport class Marker extends Component {\n  static propTypes = {\n    ...createListenersPropTypes(eventTypes),\n    google: PropTypes.object.isRequired,\n    googleMapsInstance: PropTypes.object.isRequired,\n    hit: GeolocHitPropType.isRequired,\n  };\n\n  componentDidMount() {\n    const { google, googleMapsInstance, hit, ...props } = this.props;\n\n    this.instance = new google.maps.Marker({\n      ...filterProps(props),\n      map: googleMapsInstance,\n      position: hit._geoloc,\n    });\n\n    this.removeEventsListeners = registerEvents(\n      eventTypes,\n      this.props,\n      this.instance\n    );\n  }\n\n  componentDidUpdate() {\n    this.removeEventsListeners();\n\n    this.removeEventsListeners = registerEvents(\n      eventTypes,\n      this.props,\n      this.instance\n    );\n  }\n\n  componentWillUnmount() {\n    this.instance.setMap(null);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default withGoogleMaps(Marker);\n","import { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport createHTMLMarker from './elements/createHTMLMarker';\nimport { registerEvents, createListenersPropTypes } from './utils';\nimport { GeolocHitPropType } from './propTypes';\nimport withGoogleMaps from './withGoogleMaps';\n\nconst eventTypes = {\n  onClick: 'click',\n  onDoubleClick: 'dblclick',\n  onMouseDown: 'mousedown',\n  onMouseEnter: 'mouseenter',\n  onMouseLeave: 'mouseleave',\n  onMouseMove: 'mousemove',\n  onMouseOut: 'mouseout',\n  onMouseOver: 'mouseover',\n  onMouseUp: 'mouseup',\n};\n\nexport class CustomMarker extends Component {\n  static propTypes = {\n    ...createListenersPropTypes(eventTypes),\n    hit: GeolocHitPropType.isRequired,\n    children: PropTypes.node.isRequired,\n    google: PropTypes.object.isRequired,\n    googleMapsInstance: PropTypes.object.isRequired,\n    className: PropTypes.string,\n    anchor: PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired,\n    }),\n  };\n\n  static defaultProps = {\n    className: '',\n    anchor: {\n      x: 0,\n      y: 0,\n    },\n  };\n\n  static isReact16() {\n    return typeof ReactDOM.createPortal === 'function';\n  }\n\n  state = {\n    marker: null,\n  };\n\n  componentDidMount() {\n    const { hit, google, googleMapsInstance, className, anchor } = this.props;\n    // Not the best way to create the reference of the CustomMarker\n    // but since the Google object is required didn't find another\n    // solution. Ideas?\n    const Marker = createHTMLMarker(google);\n\n    const marker = new Marker({\n      map: googleMapsInstance,\n      position: hit._geoloc,\n      className,\n      anchor,\n    });\n\n    this.removeListeners = registerEvents(eventTypes, this.props, marker);\n\n    this.setState(() => ({\n      marker,\n    }));\n  }\n\n  componentDidUpdate() {\n    const { children } = this.props;\n    const { marker } = this.state;\n\n    this.removeListeners();\n\n    this.removeListeners = registerEvents(eventTypes, this.props, marker);\n\n    if (!CustomMarker.isReact16()) {\n      ReactDOM.unstable_renderSubtreeIntoContainer(\n        this,\n        children,\n        marker.element\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    const { marker } = this.state;\n\n    if (!CustomMarker.isReact16()) {\n      ReactDOM.unmountComponentAtNode(marker.element);\n    }\n\n    marker.setMap(null);\n  }\n\n  render() {\n    const { children } = this.props;\n    const { marker } = this.state;\n\n    if (!marker || !CustomMarker.isReact16()) {\n      return null;\n    }\n\n    return ReactDOM.createPortal(children, marker.element);\n  }\n}\n\nexport default withGoogleMaps(CustomMarker);\n","const createHTMLMarker = google => {\n  class HTMLMarker extends google.maps.OverlayView {\n    constructor({\n      position,\n      map,\n      className,\n      anchor = {\n        x: 0,\n        y: 0,\n      },\n    }) {\n      super();\n\n      this.anchor = anchor;\n      this.subscriptions = [];\n      this.latLng = new google.maps.LatLng(position);\n\n      this.element = document.createElement('div');\n      this.element.className = className;\n      this.element.style.position = 'absolute';\n      // Force the \"white-space\" of the element will avoid the\n      // content to collapse when we move the map from center\n      this.element.style.whiteSpace = 'nowrap';\n\n      this.setMap(map);\n    }\n\n    onAdd() {\n      if (this.getPanes()) {\n        this.getPanes().overlayMouseTarget.appendChild(this.element);\n      }\n    }\n\n    draw() {\n      if (this.getProjection()) {\n        const position = this.getProjection().fromLatLngToDivPixel(this.latLng);\n\n        const offsetX = this.anchor.x + this.element.offsetWidth / 2;\n        const offsetY = this.anchor.y + this.element.offsetHeight;\n\n        this.element.style.left = `${Math.round(position.x - offsetX)}px`;\n        this.element.style.top = `${Math.round(position.y - offsetY)}px`;\n\n        // Markers to the south are in front of markers to the north\n        // This is the default behaviour of Google Maps\n        this.element.style.zIndex = parseInt(this.element.style.top, 10);\n      }\n    }\n\n    onRemove() {\n      if (this.element && this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element);\n\n        this.subscriptions.forEach(subscription => subscription.remove());\n\n        delete this.element;\n\n        this.subscriptions = [];\n      }\n    }\n\n    addListener(eventName, listener) {\n      const subscription = {\n        remove: () => {\n          this.element.removeEventListener(eventName, listener);\n\n          this.subscriptions = this.subscriptions.filter(\n            _ => _ !== subscription\n          );\n        },\n      };\n\n      this.element.addEventListener(eventName, listener);\n\n      this.subscriptions = this.subscriptions.concat(subscription);\n\n      return subscription;\n    }\n\n    getPosition() {\n      return this.latLng;\n    }\n  }\n\n  return HTMLMarker;\n};\n\nexport default createHTMLMarker;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createClassNames, translatable } from 'react-instantsearch-dom';\nimport GeoSearchContext from './GeoSearchContext';\nimport withGoogleMaps from './withGoogleMaps';\n\nconst cx = createClassNames('GeoSearch');\nconst RedoPropTypes = {\n  googleMapsInstance: PropTypes.object.isRequired,\n  translate: PropTypes.func.isRequired,\n};\n\nexport const Redo = ({\n  googleMapsInstance,\n  translate,\n  hasMapMoveSinceLastRefine,\n  refineWithInstance,\n}) => (\n  <div className={cx('control')}>\n    <button\n      className={cx('redo', !hasMapMoveSinceLastRefine && 'redo--disabled')}\n      disabled={!hasMapMoveSinceLastRefine}\n      onClick={() => refineWithInstance(googleMapsInstance)}\n    >\n      {translate('redo')}\n    </button>\n  </div>\n);\n\nRedo.propTypes = {\n  ...RedoPropTypes,\n  hasMapMoveSinceLastRefine: PropTypes.bool.isRequired,\n  refineWithInstance: PropTypes.func.isRequired,\n};\n\nconst RedoWrapper = props => (\n  <GeoSearchContext.Consumer>\n    {({ hasMapMoveSinceLastRefine, refineWithInstance }) => (\n      <Redo\n        {...props}\n        hasMapMoveSinceLastRefine={hasMapMoveSinceLastRefine}\n        refineWithInstance={refineWithInstance}\n      />\n    )}\n  </GeoSearchContext.Consumer>\n);\n\nRedoWrapper.propTypes = RedoPropTypes;\n\nexport default translatable({\n  redo: 'Redo search here',\n})(withGoogleMaps(RedoWrapper));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createClassNames, translatable } from 'react-instantsearch-dom';\nimport GeoSearchContext from './GeoSearchContext';\nimport withGoogleMaps from './withGoogleMaps';\n\nconst cx = createClassNames('GeoSearch');\nconst ControlPropTypes = {\n  googleMapsInstance: PropTypes.object.isRequired,\n  translate: PropTypes.func.isRequired,\n};\n\nexport const Control = ({\n  googleMapsInstance,\n  translate,\n  isRefineOnMapMove,\n  hasMapMoveSinceLastRefine,\n  toggleRefineOnMapMove,\n  refineWithInstance,\n}) => (\n  <div className={cx('control')}>\n    {isRefineOnMapMove || !hasMapMoveSinceLastRefine ? (\n      <label className={cx('label')}>\n        <input\n          className={cx('input')}\n          type=\"checkbox\"\n          checked={isRefineOnMapMove}\n          onChange={toggleRefineOnMapMove}\n        />\n        {translate('control')}\n      </label>\n    ) : (\n      <button\n        className={cx('redo')}\n        onClick={() => refineWithInstance(googleMapsInstance)}\n      >\n        {translate('redo')}\n      </button>\n    )}\n  </div>\n);\n\nControl.propTypes = {\n  ...ControlPropTypes,\n  isRefineOnMapMove: PropTypes.bool.isRequired,\n  toggleRefineOnMapMove: PropTypes.func.isRequired,\n  hasMapMoveSinceLastRefine: PropTypes.bool.isRequired,\n  refineWithInstance: PropTypes.func.isRequired,\n};\n\nconst ControlWrapper = props => (\n  <GeoSearchContext.Consumer>\n    {({\n      isRefineOnMapMove,\n      hasMapMoveSinceLastRefine,\n      toggleRefineOnMapMove,\n      refineWithInstance,\n    }) => (\n      <Control\n        {...props}\n        isRefineOnMapMove={isRefineOnMapMove}\n        hasMapMoveSinceLastRefine={hasMapMoveSinceLastRefine}\n        toggleRefineOnMapMove={toggleRefineOnMapMove}\n        refineWithInstance={refineWithInstance}\n      />\n    )}\n  </GeoSearchContext.Consumer>\n);\n\nControlWrapper.propTypes = ControlPropTypes;\n\nexport default translatable({\n  control: 'Search as I move the map',\n  redo: 'Redo search here',\n})(withGoogleMaps(ControlWrapper));\n","/*!\n  * $script.js JS loader & dependency manager\n  * https://github.com/ded/script.js\n  * (c) Dustin Diaz 2014 | License MIT\n  */\n\n(function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(definition)\n  else this[name] = definition()\n})('$script', function () {\n  var doc = document\n    , head = doc.getElementsByTagName('head')[0]\n    , s = 'string'\n    , f = false\n    , push = 'push'\n    , readyState = 'readyState'\n    , onreadystatechange = 'onreadystatechange'\n    , list = {}\n    , ids = {}\n    , delay = {}\n    , scripts = {}\n    , scriptpath\n    , urlArgs\n\n  function every(ar, fn) {\n    for (var i = 0, j = ar.length; i < j; ++i) if (!fn(ar[i])) return f\n    return 1\n  }\n  function each(ar, fn) {\n    every(ar, function (el) {\n      return !fn(el)\n    })\n  }\n\n  function $script(paths, idOrDone, optDone) {\n    paths = paths[push] ? paths : [paths]\n    var idOrDoneIsDone = idOrDone && idOrDone.call\n      , done = idOrDoneIsDone ? idOrDone : optDone\n      , id = idOrDoneIsDone ? paths.join('') : idOrDone\n      , queue = paths.length\n    function loopFn(item) {\n      return item.call ? item() : list[item]\n    }\n    function callback() {\n      if (!--queue) {\n        list[id] = 1\n        done && done()\n        for (var dset in delay) {\n          every(dset.split('|'), loopFn) && !each(delay[dset], loopFn) && (delay[dset] = [])\n        }\n      }\n    }\n    setTimeout(function () {\n      each(paths, function loading(path, force) {\n        if (path === null) return callback()\n        \n        if (!force && !/^https?:\\/\\//.test(path) && scriptpath) {\n          path = (path.indexOf('.js') === -1) ? scriptpath + path + '.js' : scriptpath + path;\n        }\n        \n        if (scripts[path]) {\n          if (id) ids[id] = 1\n          return (scripts[path] == 2) ? callback() : setTimeout(function () { loading(path, true) }, 0)\n        }\n\n        scripts[path] = 1\n        if (id) ids[id] = 1\n        create(path, callback)\n      })\n    }, 0)\n    return $script\n  }\n\n  function create(path, fn) {\n    var el = doc.createElement('script'), loaded\n    el.onload = el.onerror = el[onreadystatechange] = function () {\n      if ((el[readyState] && !(/^c|loade/.test(el[readyState]))) || loaded) return;\n      el.onload = el[onreadystatechange] = null\n      loaded = 1\n      scripts[path] = 2\n      fn()\n    }\n    el.async = 1\n    el.src = urlArgs ? path + (path.indexOf('?') === -1 ? '?' : '&') + urlArgs : path;\n    head.insertBefore(el, head.lastChild)\n  }\n\n  $script.get = create\n\n  $script.order = function (scripts, id, done) {\n    (function callback(s) {\n      s = scripts.shift()\n      !scripts.length ? $script(s, id, done) : $script(s, callback)\n    }())\n  }\n\n  $script.path = function (p) {\n    scriptpath = p\n  }\n  $script.urlArgs = function (str) {\n    urlArgs = str;\n  }\n  $script.ready = function (deps, ready, req) {\n    deps = deps[push] ? deps : [deps]\n    var missing = [];\n    !each(deps, function (dep) {\n      list[dep] || missing[push](dep);\n    }) && every(deps, function (dep) {return list[dep]}) ?\n      ready() : !function (key) {\n      delay[key] = delay[key] || []\n      delay[key][push](ready)\n      req && req(missing)\n    }(deps.join('|'))\n    return $script\n  }\n\n  $script.done = function (idOrDone) {\n    $script([null], idOrDone)\n  }\n\n  return $script\n});\n"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_typeof2","obj","Symbol","iterator","constructor","_typeof","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_inherits","subClass","superClass","create","value","_defineProperty","global","window","setTimeout","clearTimeout","performance","now","mozNow","msNow","oNow","webkitNow","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","n","join","test3","split","forEach","letter","keys","err","shouldUseNative","emptyFunction","module","shim","propName","componentName","location","propFullName","secret","Error","name","getShim","ReactPropTypes","array","isRequired","bool","func","number","object","string","symbol","any","arrayOf","element","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","require$$1","GoogleMapsLoader","google","Component","Promise","then","injectScript","default","_this2","apiKey","endpoint","operator","indexOf","isUnmounting","setState","this","state","children","_extends","arguments","source","apply","_objectWithoutProperties","excluded","sourceKeys","objectWithoutPropertiesLoose","sourceSymbolKeys","_objectSpread","ownKeys","concat","filter","sym","getOwnPropertyDescriptor","isEqualPosition","a","b","undefined","lat","lng","Connector","isRefineOnMapMove","_this","enableRefineOnMapMove","hasMapMoveSinceLastRefine","previousPosition","position","previousCurrentRefinement","currentRefinement","next","hits","isRefinedWithMap","refine","toggleRefineOnMapMove","setMapMoveSinceLastRefine","positionChanged","currentRefinementChanged","northEast","southWest","sliceNextState","connectGeoSearch","GeoSearchContext","React","createContext","refineWithInstance","Provider","bounds","getBounds","getNorthEast","toJSON","getSouthWest","mapValue","isRefineEnable","isPendingRefine","latLngBounds","reduce","acc","hit","extend","_geoloc","maps","LatLngBounds","boundingBoxPadding","boundingBox","Boolean","createBoundingBoxFromHits","getMapValue","onChange","onIdle","shouldUpdate","GoogleMapsContext","cx","createClassNames","GoogleMaps","createRef","isMapReady","listeners","isUserInteraction","push","addListener","mapOptions","Map","mapRef","current","mapTypeControl","fullscreenControl","streetViewControl","clickableIcons","zoomControlOptions","ControlPosition","LEFT_TOP","event","addListenerOnce","setupListenersWhenMapIsReady","initialZoom","initialPosition","lockUserInteration","fitBounds","setZoom","setCenter","listener","remove","functionThatAltersTheMapPosition","className","ref","GeoSearch","rest","enableRefine","defaultRefinement","testID","renderChildrenWithBoundFunction","excludes","registerEvents","events","eventsAvailable","marker","withGoogleMaps","Wrapped","Consumer","googleMapsInstance","eventTypes","onClick","onDoubleClick","onMouseDown","onMouseOut","onMouseOver","onMouseUp","filterProps","Marker","removeEventsListeners","setMap","onMouseEnter","onMouseLeave","onMouseMove","CustomMarker","anchor","x","y","subscriptions","latLng","LatLng","document","createElement","style","whiteSpace","OverlayView","getPanes","overlayMouseTarget","appendChild","getProjection","fromLatLngToDivPixel","offsetX","offsetWidth","offsetY","offsetHeight","left","Math","round","top","zIndex","parseInt","parentNode","removeChild","subscription","eventName","removeEventListener","_","addEventListener","removeListeners","isReact16","ReactDOM","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","createPortal","Redo","translate","disabled","translatable","redo","Control","type","checked","control","definition","exports","scriptpath","urlArgs","doc","head","getElementsByTagName","f","readyState","onreadystatechange","list","delay","scripts","every","ar","fn","j","each","el","$script","paths","idOrDone","optDone","idOrDoneIsDone","done","id","queue","loopFn","item","callback","dset","loading","path","force","test","loaded","onload","onerror","async","src","insertBefore","lastChild","get","order","s","shift","str","ready","deps","req","missing","dep"],"mappings":"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"}